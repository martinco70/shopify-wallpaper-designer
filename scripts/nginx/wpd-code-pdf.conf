# Rewrite short-code PDF links like /ULSF9D.pdf to internal route
# Backend already supports /config/:code/pdf, so keep it minimal.
location ~ ^/([A-Z0-9]{5,12})\.pdf$ {
    rewrite ^/([A-Z0-9]{5,12})\.pdf$ /config/$1/pdf break;

    proxy_pass http://127.0.0.1:3001;
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

    # Strong no-store headers to avoid stale caches
    add_header Cache-Control "no-store, no-cache, must-revalidate" always;
    add_header Pragma "no-cache" always;
    add_header Expires "0" always;
}